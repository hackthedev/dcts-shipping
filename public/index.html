<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="expires" content="" />

    <!-- <meta name="description" content="{{meta.page.description}}" /> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js" crossorigin="anonymous"></script>

    <script src="https://raw.githack.com/SortableJS/Sortable/master/Sortable.js"></script>

    <!-- New to-be-implement features-->
    <script src="js/alerts.js?v={{version}}"></script>
    <script src="js/prompts.js?v={{version}}"></script>
    <script src="js/tooltips.js?v={{version}}"></script>
    <script src="js/sysmsg.js?v={{version}}"></script>
    <script src="js/upload.js?v={{version}}"></script>

    <script src="audioplayer/audioplayer.js?v={{version}}"></script>



    <link href="/settings/account/page/profile/profile.css?v={{version}}" rel="stylesheet">

    <link href="highlight.css?v={{version}}" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/themes/default.css?v={{version}}">
    <link rel="stylesheet" href="style.css?v={{version}}">
    <link rel="stylesheet" href="css/channeltree.css?v={{version}}">
    <link rel="stylesheet" href="css/mobile.css?v={{version}}">
    <link rel="stylesheet" href="css/screenshare.css?v={{version}}">
    <link rel="stylesheet" href="audioplayer/audioplayer.css?v={{version}}">
    <link rel="stylesheet" href="css/groups/groupHomeDisplay.css?v={{version}}">
    <link rel="stylesheet" href="css/emoji-autocomplete.css?v={{version}}">
    <link rel="stylesheet" href="css/Home.css?v={{version}}">


    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script defer src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/default.min.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/languages/ruby.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/languages/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/languages/css.min.js"></script>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- tooltips -->
    <script src="js/tooltips/dialogs/createChannel.js?v={{version}}"></script>
    <script src="js/tooltips/dialogs/banUser.js?v={{version}}"></script>
    <script src="js/tooltips/dialogs/muteUser.js?v={{version}}"></script>
    <script src="js/tooltips/dialogs/newUserExplainUI.js?v={{version}}"></script>
    <script src="js/tooltips/dialogs/accountOnboarding.js?v={{version}}"></script>

    <!-- general chat functions -->
    <script src="js/escape.js"></script>
    <script src="js/hover.js"></script>
    <script src="js/core/FileManager.js?v={{version}}"></script>
    <script src="js/core/ModView.js?v={{version}}"></script>
    <script src="js/core/UserReports.js?v={{version}}"></script>
    <script src="js/core/ContextMenu.js?v={{version}}"></script>
    <script src="js/emojis.js?v={{version}}"></script>
    <script src="js/core/CookieManager.js?v={{version}}"></script>
    <script src="js/core/ModActions.js?v={{version}}"></script>
    <script src="js/core/AdminActions.js?v={{version}}"></script>
    <script src="js/core/ChatManager.js?v={{version}}"></script>
    <script src="js/core/UserManager.js?v={{version}}"></script>
    <script src="js/core/Channeltree.js?v={{version}}"></script>
    <script src="js/core/Home.js?v={{version}}"></script>

    <script src="js/effects/confetti.js?v={{version}}"></script>
    <script src="js/effects/party.js?v={{version}}"></script>
    <script src="js/effects/pixel.js?v={{version}}"></script>
    <script src="js/effects/glitch.js?v={{version}}"></script>

    <script src="/plugins/loader.js?v={{version}}"></script>


    <script src="js/core/PoW.js?v={{version}}"></script>
    <script src="voip/voip.js?v={{version}}"></script>
    <script src="js/voip-handle.js?v={{version}}"></script>

    
    <script defer src="chat.js?v={{version}}"></script>

    <meta name="description" content="{{meta.page.description}}">
    <title>{{meta.page.title}}</title> <!-- {{meta.page.title}} -->
</head>

<body>

    <div id="header"></div>

    <div id="modalBox">
        <h1 id="modalBoxTitle">-</h1>
        <p id="modalBoxText">-</p>
        <div id="modalBoxButtons"></div>
    </div>

    <div id="popup-container" style="z-index: 99999;"></div>


    <div id="context-menu"></div>



    <!-- Markdown Editor -->
    <style>
        .editor-container {
            width: calc(100% - 40px) !important;
            border-radius: 8px;
            /*box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);*/
            padding: 0px;


            margin-left: -8px !important;
            border-radius: 8px;

            display: block;
            float: left;

            transition: height 0.3s ease, transform 0.3s ease, margin 0.3s ease;
            margin-left: 0px;
        }

        .ql-toolbar {
            border: none;
        }

        .ql-container {
            color: #ffffff;
            border: none;
            transition: height 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .ql-editor {
            color: #ffffff;
            overflow-y: auto;
            /* Make it scrollable */
            flex: 1;
            /* Ensure it grows to fill the container */
            max-height: 400px;
            /* Limit max height */
            padding-bottom: 8px;
            overflow-y: auto;
            /* Make it scrollable */
        }

        .ql-toolbar button {
            color: #ffffff !important;
        }

        .ql-toolbar button:hover {
            color: #7289da !important;
        }

        .ql-toolbar .ql-stroke {
            fill: none;
            stroke: lightgray;
        }

        .ql-toolbar .ql-picker {
            color: white;
        }

        .ql-toolbar .ql-even {
            color: lightgray;
        }

        .ql-toolbar .ql-blockquote {
            color: lightgray;
        }

        .ql-toolbar .ql-video {
            stroke: lightgray;
            fill: none;
        }

        .ql-toolbar .ql-image {
            color: lightgray;
            stroke: lightgray;
            fill: none;
        }

        .ql-toolbar .ql-strike {
            stroke: lightgray;
            fill: none;
        }

        .ql-toolbar .ql-list {
            stroke: lightgray;
            fill: none;
        }

        .ql-toolbar .ql-formula {
            stroke: lightgray;
            fill: none;
        }

        .ql-toolbar button:hover {
            color: red !important;
        }
    </style>


    <div id="profile-role-menu">

        <div id="role-menu-header">
            <input type="text" id="role-menu-search-input" placeholder="Search Role"
                oninput="searchForRoleInList(this.value)">
            <div id="role-menu-search-icon"></div>
        </div>
        <div id="role-menu-list"></div>
    </div>

    <script>
        function searchForRoleInList(search) {
            var roles = document.getElementById("role-menu-list").querySelectorAll(".role-menu-entry")


            roles.forEach(role => {
                var roleName = role.querySelector("label").innerText.toLowerCase();

                if (roleName.includes(search.toLowerCase())) {
                    console.log("Found " + roleName)
                    role.style.display = "block";
                }
                else {
                    console.log("Didnt find " + roleName)
                    role.style.display = "none"
                }
            })
        }
    </script>



    <!-- Mobile HTML-->

    <div id="leftSideMenu">
        <div id="mobile-channellist-trigger" onclick="switchLeftSideMenu()"></div>

        <div id="mobile_GroupAndChannelContainer">
            <div id="mobile_GroupList"></div>
            <div id="mobile_groupBanner"><img id="mobile_groupBannerDisplay" /></div>
            <div id="mobile_channelList"></div>
        </div>
    </div>


    <div id="profile_container" style="display: none;position: fixed;z-index: 10000;">
        <div id="profile_banner"></div>

        <div id="profile_pfp_container">
            <div id="profile_pfp"></div>
        </div>

        <div id="profile_content">
            <div id="profile_username">
                <h2></h2>
            </div>
            <div id="profile_status"></div>
            <hr>

            <h2 class="profile_headline"></h2>
            <div id="profile_aboutme">
            </div>
            <hr>

            <h2 id="profile_headline"></h2>
            <div id="profile_roles">
                <code class="role"><div class="role_color"></div>+</code>
            </div>
        </div>
    </div>

    <!-- well actually more of a group list -->
    <div id="serverlist"></div>

    <div id="channellist">

        <div id="serverbanner-container">
            <img id="serverbanner-image" src="/img/loading.gif">
        </div>

        <div id="channeltree"></div>

        <div id="profile-qa">
            <div id="profile-qa-img-container">
                <img id="profile-qa-img" onerror="this.src = '/img/default_pfp.png';">
            </div>

            <div id="profile-qa-info">
                <Label title="Edit your username" id="profile-qa-info-username">-</Label><br>
                <Label title="Edit your status" id="profile-qa-info-status">-</Label>
            </div>

            <a href="/settings/account">
                <div id="profile-qa-settings"></div>
            </a>
        </div>
    </div>


    <div id="content-container">

        <div id="channelname-bar">
            <div id="channelname"></div>
            <div id="channelname-icons"></div>
        </div>

        <div id="content"></div>

        <div id="message-actions">
            <div id="emoji-box-container" style="display: none;">

                <div id="emoji-box-header-container">
                    <div class='emoji-box-header' id="emoji-box-emojis" onclick="getEmojis(); selectEmojiTab(this);">
                        <h2>Emojis</h2>
                    </div>
                    <div class='emoji-box-header' id="emoji-box-gifs" onclick="getGifs(); selectEmojiTab(this);">
                        <h2>GIFs</h2>
                    </div>
                </div>

                <div id="gif-searchbar"><input autocomplete="off" placeholder="Search anything, then press enter"
                        type="text" id="gif-searchbar-input"></div>

                <div id="emoji-entry-container"></div>
            </div>
        </div>

        <div id="messagebox">
            <div id="messagebox-media"></div>

            <div class="editor-container" style="z-index: 9999999 !important;">
                <div id="editor-toolbar" style="border: none !important;">
                    <!-- Add toolbar buttons as needed -->
                    <span class="ql-formats" style="border-right: 2px solid lightgray !important;">
                        <button title="Bold" class="ql-bold"></button>
                        <button title="Italic" class="ql-italic"></button>
                        <button title="Underline" class="ql-underline"></button>
                        <button title="Strikeout" class="ql-strike"></button>
                    </span>

                    <span class="ql-formats" style="border-right: 2px solid lightgray !important;">
                        <button title="Link" class="ql-link"></button>
                        <!--<button title="Image" class="ql-image"></button>
                        <button title="Video" class="ql-video"></button>-->
                    </span>

                    <span class="ql-formats" style="border-right: 2px solid lightgray !important;">
                        <button title="Inline Code" class="ql-code"></button>
                        <button title="Code Block" class="ql-code-block"></button>
                        <button title="Blockquote" class="ql-blockquote"></button>
                    </span>

                    <span class="ql-formats" style="border-right: 2px solid lightgray !important;">
                        <button title="Numbered List" class="ql-list" value="ordered"></button>
                        <button title="Bullet List" class="ql-list" value="bullet"></button>
                        <button title="Formula" class="ql-formula"></button>
                    </span>

                    <img id="message-actions-image" src="/img/emoji.png">
                </div>
                <div id="editor" style="border: none !important;"></div>
            </div>

            <div id="typing-indicator-container" style="display: block;"><label id="typing-indicator"></label></div>
        </div>


    </div>

    <div id="infolist"></div>

    <div id="rightSideMenu">
        <div id="mobile-memberlist-trigger" onclick="switchRightSideMenu()"></div>
        <div id="mobile_memberlist"></div>
    </div>

    <div id="homeScreen"></div>
</body>
</html>